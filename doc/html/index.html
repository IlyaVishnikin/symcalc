<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SymCalc: SymCalc Documentation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SymCalc
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title"><a class="el" href="namespaceSymCalc.html">SymCalc</a> Documentation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_README"></a></p>
<h1><a class="anchor" id="autotoc_md1"></a>
Overview</h1>
<p><a class="el" href="namespaceSymCalc.html">SymCalc</a> is a C++ header-only library for generic symbolic calculations which supports user defined constants and operators(functions) in different notation styles(<a href="https://en.wikipedia.org/wiki/Infix_notation">infix</a> and <a href="https://en.wikipedia.org/wiki/Polish_notation">prefix</a> notations), floating point numbers and supportive functions which you can use to transform infix notation to postfix.</p>
<p>For more information about adding new constants and operators(function) see <a href="#constats">Constants</a> and <a href="#operators">Operators</a> sections.</p>
<h2><a class="anchor" id="autotoc_md2"></a>
Algorithms</h2>
<p>In this section described algorithms which used in <a class="el" href="namespaceSymCalc.html">SymCalc</a>.</p>
<p><em>Note: This algorithms are written on pseudocode</em> </p>
<h3><a class="anchor" id="autotoc_md3"></a>
Infix to postfix</h3>
<p>Algorithm that transform algebraic expression in infix notation to postfix(also known as <a href="https://en.wikipedia.org/wiki/Reverse_Polish_notation">reverse polish</a>) notation is a modification of <a href="https://en.wikipedia.org/wiki/Shunting_yard_algorithm">shunting yard algorithm</a> which allow parse not only already predefined operators(such as +, -, /, *) but also user defined operators(for example functions like <em>sin</em>, <em>cos</em>, <em>sqrt</em> or <em>foo</em>) and constants.</p>
<div class="fragment"><div class="line">stack = []</div>
<div class="line">output = []</div>
<div class="line"> </div>
<div class="line">for token in formula:</div>
<div class="line">    if is_number(token)</div>
<div class="line">        output.push(token)</div>
<div class="line">    else if token = &quot;(&quot;</div>
<div class="line">        stack.push(token)</div>
<div class="line">    else if token = &quot;)&quot;</div>
<div class="line">        output.push(stack.pop()) while (stack.top != &quot;(&quot;)</div>
<div class="line">        stack.pop() # remove left parenthesis from stack</div>
<div class="line">        </div>
<div class="line">        # checking that parenthesis are associates with function</div>
<div class="line">        # or more generaly, with operator which written on prefix notation</div>
<div class="line">        output.push(stack.pop()) if has_prefix_notation(stack.top) </div>
<div class="line">    else</div>
<div class="line">        if is_operator(token)</div>
<div class="line">            stack.push(token) and continue if stack.empty() or stack.top = &quot;(&quot;</div>
<div class="line">            </div>
<div class="line">            op1_p, op2_p = precedence(token), precedence(stack.top)</div>
<div class="line">            op1_la = is_operator_left_associated(token)</div>
<div class="line">            while !stack.empty() and (op2_p &gt; op1_p or (op1_p = op2_p and op1_la))</div>
<div class="line">                output.push(stack.pop())</div>
<div class="line">                op2_p = precedence(stack.top) # new operator precedence</div>
<div class="line">            stack.push(token)</div>
<div class="line">        else if is_contant(token)</div>
<div class="line">            output.push(get_constant_value(token))</div>
<div class="line">        </div>
<div class="line">output.push(stack.pop()) while !stack.empty()</div>
<div class="line">return output</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md4"></a>
Calculating formula in postfix notation</h3>
<p>Alogirhtm that calculate formula in postfix notation is a default postfix algorithm modification. This algorithm allows function get variable number of arguments and also return variable number of calculations(see <a href="#operators">operators</a>) </p><div class="fragment"><div class="line">output = [] # array of floating point numbers</div>
<div class="line"> </div>
<div class="line">for token in formula:</div>
<div class="line">    if is_number(token)</div>
<div class="line">        output.push(token)</div>
<div class="line">    else</div>
<div class="line">        # extract operator arguments: [0..op_max_arguments_count)</div>
<div class="line">        args, op_max_arguments_count = [], get_max_operator_args_count(token)</div>
<div class="line">        while op_max_arguments_count-- and !output.empty()</div>
<div class="line">            args.push(stack.pop())</div>
<div class="line">        </div>
<div class="line">        # reversing arguments because in reverse notation they are reversed</div>
<div class="line">        args.reverse()</div>
<div class="line">        operator_output = execute_operator(token)(args)</div>
<div class="line">        operator_output.reverse()</div>
<div class="line">        output.append(operator_output)</div>
<div class="line"> </div>
<div class="line">output.reverse()</div>
<div class="line">return output</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md5"></a>
Operators</h1>
<p>This section describes how you can add new operators and get information about already existed operators.</p>
<h2><a class="anchor" id="autotoc_md6"></a>
Adding new operators</h2>
<p>For adding new operators you should use <b>add</b> function that are declared in <b><a class="el" href="namespaceSymCalc_1_1Operators.html" title="contains function and typedef for operators(functions):">SymCalc::Operators</a></b> namespace and <b>DECLARE_OPERATOR</b> macros that declared in <b><a class="el" href="namespaceSymCalc.html">SymCalc</a></b> namespace. You can use "add" function with DECLARE_OPERATOR if don't want declare C++ function.</p>
<p>For example, we add new operator with name "foo" which writing in infix notation and return:</p><ul>
<li>1, if sum of arguments higher than 0</li>
<li>0, if sum equal 0</li>
<li>-1, if sum lower than 0</li>
</ul>
<div class="fragment"><div class="line">SymCalc::Operators::add(DECLARE_OPERATOR(</div>
<div class="line">    &quot;foo&quot;, // operator name,</div>
<div class="line">    2, // maximum number of arguments that this operators receieves</div>
<div class="line">    {</div>
<div class="line">        // function body, parenthesis { } after &#39;return&#39; required</div>
<div class="line">        if (args[0] + args[1] &gt; 1) return { 1 };</div>
<div class="line">        else if (args[0] + args[1] == 0) return { 0 };</div>
<div class="line">        else return { -1 };</div>
<div class="line">    }, </div>
<div class="line">    10, // operator precedence</div>
<div class="line">    SymCalc::Operators::LEFT_ASSOCIATED, // operator associativity</div>
<div class="line">    true // has a infix notation</div>
<div class="line">));</div>
</div><!-- fragment --><p>And usage of this operator </p><div class="fragment"><div class="line">cout &lt;&lt; &quot;0 foo -1 = &quot; &lt;&lt; SymCalc::calculate(&quot;0 foo ~1&quot;)[0] &lt;&lt; endl;  // ~ is a unary minus operator</div>
<div class="line">cout &lt;&lt; &quot;1 foo -1 = &quot; &lt;&lt; SymCalc::calculate(&quot;1 foo ~1&quot;)[0] &lt;&lt; endl;</div>
<div class="line">cout &lt;&lt; &quot;1 foo 1  = &quot; &lt;&lt; SymCalc::calculate(&quot;1 foo 1&quot;)[0]  &lt;&lt; endl;</div>
</div><!-- fragment --><p>Output </p><div class="fragment"><div class="line">0 foo -1 = -1</div>
<div class="line">1 foo -1 = 0</div>
<div class="line">1 foo 1 = 1</div>
</div><!-- fragment --><p>You also can use another version of <b>add</b> function. This version can be used when yours function implementation is too long.</p>
<p>Another implementation of the previouse example: </p><div class="fragment"><div class="line">vector&lt;long double&gt; operator_foo(vector&lt;long double&gt; args)</div>
<div class="line">{</div>
<div class="line">    long double sum = args[0] + args[1];</div>
<div class="line">    if (sum &gt; 0)</div>
<div class="line">        return { 1 };</div>
<div class="line">    else if (sum == 0)</div>
<div class="line">        return { 0 };</div>
<div class="line">    else</div>
<div class="line">        return { -1 };</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">SymCalc::Operators::add(&quot;foo&quot;, 2, &amp;operator_foo, 10, SymCalc::Operators::LEFT_ASSOCIATED, true);</div>
<div class="line"> </div>
<div class="line">cout &lt;&lt; &quot;0 foo -1 = &quot; &lt;&lt; SymCalc::calculate(&quot;0 foo ~1&quot;)[0] &lt;&lt; endl;</div>
<div class="line">cout &lt;&lt; &quot;1 foo -1 = &quot; &lt;&lt; SymCalc::calculate(&quot;1 foo ~1&quot;)[0] &lt;&lt; endl;</div>
<div class="line">cout &lt;&lt; &quot;1 foo 1  = &quot; &lt;&lt; SymCalc::calculate(&quot;1 foo 1&quot;)[0]  &lt;&lt; endl;</div>
</div><!-- fragment --><p>Output </p><div class="fragment"><div class="line">0 foo -1 = -1</div>
<div class="line">1 foo -1 = 0</div>
<div class="line">1 foo 1  = 1</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md7"></a>
Update predefined operators</h2>
<p>You change predefined operators(+, -, /, *, etc...) behavior. To do this, you should use <b>update</b> function which declarated in <b><a class="el" href="namespaceSymCalc_1_1Operators.html" title="contains function and typedef for operators(functions):">SymCalc::Operators</a></b> namespace.</p>
<p>For example, we change + operator behavior to multiplication: </p><div class="fragment"><div class="line">vector&lt;long double&gt; new_plus_operator(vector&lt;long double&gt; args)</div>
<div class="line">{</div>
<div class="line">    return { args[0] * args[1] };</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">SymCalc::Operators::update(&quot;+&quot;, &amp;new_plus_operator);</div>
<div class="line">cout &lt;&lt; &quot;2 + 12 =&quot; &lt;&lt; SymCalc::calculate(&quot;2 + 12&quot;);</div>
</div><!-- fragment --><p>Output </p><div class="fragment"><div class="line">2 + 12 = 24</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md8"></a>
Operator Info</h2>
<p><b>OperatorInfo</b> typedef that declared in <b><a class="el" href="namespaceSymCalc_1_1Operators.html" title="contains function and typedef for operators(functions):">SymCalc::Operators</a>:</b> namespace.</p>
<p>OperatorInfo constains next information about operator:</p>
<ol type="1">
<li>ArgsCount - maximum number of arguments that function can receive</li>
<li>Operator pointer to function which executed when <b><a class="el" href="namespaceSymCalc.html#a7ae90c743aaf4c34c56711b840bf68bc">SymCalc::calculate</a></b> meets operator</li>
<li>Precedence - precedence(priority) of the operator</li>
<li>Associativity - type of the operator associativity</li>
<li>Infix - is operator writes in infix notation or not</li>
</ol>
<h2><a class="anchor" id="autotoc_md9"></a>
Predefined operators</h2>
<p>See <a class="el" href="namespaceSymCalc_1_1Operators.html#a9eb303d85336d1755d879271212a42bd" title="Predefined operators.">SymCalc::Operators::operators</a> in documentation</p>
<h1><a class="anchor" id="autotoc_md10"></a>
Constants</h1>
<p>This section describes how you can add new constants</p>
<h2><a class="anchor" id="autotoc_md11"></a>
Adding new constant</h2>
<p>For adding new constant you should use <b>add</b> function that declared in <b><a class="el" href="namespaceSymCalc_1_1Consts.html" title="Namespace that contains constants and functions for working with constants.">SymCalc::Consts</a></b> namespace.</p>
<p>For example, we declare new constant with name "foo": </p><div class="fragment"><div class="line">SymCalc::Consts::add(&quot;foo&quot;, -100);</div>
<div class="line"> </div>
<div class="line">cout &lt;&lt; &quot;1 + foo = &quot; &lt;&lt; SymCalc::calculate(&quot;1 + foo&quot;)[0] &lt;&lt; endl;</div>
</div><!-- fragment --><p>Output: </p><div class="fragment"><div class="line">1 + foo = -99</div>
</div><!-- fragment --> </div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
